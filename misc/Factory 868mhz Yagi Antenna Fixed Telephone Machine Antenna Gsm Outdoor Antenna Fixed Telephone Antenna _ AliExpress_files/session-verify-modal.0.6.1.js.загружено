System.register(["@aer/i18n-context","@aer/login-utils","@aer/use-match-media","react","react-dom","@aer/snow-dialog-v2","@aer/snow-ali-kit","@aer/login-input","@aer/phone-input-context","@aer/change-account-id","@aer/haze-platform-modal","@aer/login-api","@aer/red-ali-kit"],(function(e){"use strict";var n,o,t,i,a,r,l,s,c,d,u,m,f,g,_,v,p,y,h,C,E,w,S,b,I,L,O,N,P,x,M,D,F,z,V,R,k;return{setters:[function(e){n=e.useI18n},function(e){o=e.validateEmail,t=e.getCountOfDigits,i=e.getClearPhoneNumber,a=e.initAwsc,r=e.CountryCodesList,l=e.getCodeInputTextProps,s=e.DEFAULT_ERROR_MESSAGE,c=e.getReturnUrl},function(e){d=e.default},function(e){u=e.default,m=e.useState,f=e.useEffect,g=e.useCallback},function(e){_=e.default},function(e){v=e.default},function(e){p=e.Typography,y=e.Button,h=e.Loader,C=e.Heading},function(e){E=e.PhoneInput},function(e){w=e.usePhoneInputContext},function(e){S=e.VerifyScreen},function(e){b=e.PlatformModal},function(e){I=e.getDomain,L=e.getSessionVerifyConfig,O=e.getSessionVerifyData,N=e.sessionVerifyByPhoneInit,P=e.sessionVerifyByEmailInit,x=e.sessionVerifyByPhoneAttempt,M=e.sessionVerifyByEmailAttempt,D=e.SuccessCode,F=e.sessionVerifyResend,z=e.ErrorCode,V=e.logout},function(e){R=e.Typography,k=e.Button}],execute:function(){function T(e,n,o,t){return new(o||(o=Promise))((function(i,a){function r(e){try{s(t.next(e))}catch(e){a(e)}}function l(e){try{s(t.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,l)}s((t=t.apply(e,n||[])).next())}))}var A="session-verify_SessionVerifyModal__dialog__sy7r8n",U="session-verify_SessionVerifyModal__loader__sy7r8n",B="session-verify_SessionVerifyModal__errorContainer__sy7r8n",j="session-verify_SessionVerifyModal__errorMessage__sy7r8n",G="session-verify_SessionVerifyModal__catIcon__sy7r8n";const H=e=>u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",viewBox:"0 0 101 100",fill:"none"},e),u.createElement("path",{d:"M80.5 70V50C80.5 47.25 78.25 45 75.5 45C72.75 45 70.5 47.25 70.5 50V70C70.5 72.75 72.75 75 75.5 75C78.25 75 80.5 72.75 80.5 70ZM95.5 0C94.115 0 92.865 0.564991 91.955 1.47499L63.435 30H37.565L9.045 1.47499C8.135 0.564991 6.885 0 5.5 0C2.735 0 0.5 2.24 0.5 5V60C0.5 82.09 22.895 100 50.5 100C78.105 100 100.5 82.09 100.5 60V5C100.5 2.24 98.265 0 95.5 0ZM25.5 75C17.22 75 10.5 68.28 10.5 60C10.5 51.715 17.22 45 25.5 45C33.78 45 40.5 51.715 40.5 60C40.5 68.28 33.78 75 25.5 75ZM58 85C59.38 85 60.5 86.12 60.5 87.5C60.5 88.88 59.38 90 58 90C55.015 90 52.335 88.6851 50.5 86.6051C48.665 88.6851 45.985 90 43 90C41.62 90 40.5 88.88 40.5 87.5C40.5 86.12 41.62 85 43 85C45.76 85 48 82.755 48 80C48 77.245 45.76 75 43 75C41.62 75 40.5 73.88 40.5 72.5C40.5 71.12 41.62 70 43 70H58C59.38 70 60.5 71.12 60.5 72.5C60.5 73.88 59.38 75 58 75C55.24 75 53 77.245 53 80C53 82.755 55.24 85 58 85ZM75.5 75C67.22 75 60.5 68.28 60.5 60C60.5 51.715 67.22 45 75.5 45C83.78 45 90.5 51.715 90.5 60C90.5 68.28 83.78 75 75.5 75ZM30.5 70V50C30.5 47.25 28.25 45 25.5 45C22.75 45 20.5 47.25 20.5 50V70C20.5 72.75 22.75 75 25.5 75C28.25 75 30.5 72.75 30.5 70Z",fill:"black"}));var $="session-verify_InitStage__input__1w07jb",W="session-verify_InitStage__title__1w07jb",X="session-verify_InitStage__errorTitle__1w07jb",Y="session-verify_InitStage__errorButton__1w07jb";const K=({i18nData:e,onFetchFlowData:n})=>{const[o,t]=m(!1),{i18n:i}=e;return u.createElement("div",{className:B},u.createElement(H,null),u.createElement(p.Heading,{className:X,size:"M"},(null==i?void 0:i.bx_common_clientDefaultError)||"Упс! Какая-то ошибка"),u.createElement(p.Text,{size:"S"},(null==i?void 0:i.bx_common_apologize)||"Мы приносим извинения за доставленные неудобства. Попробуйте снова."),u.createElement(y,{className:Y,onClick:()=>T(void 0,void 0,void 0,(function*(){t(!0),yield n(),t(!1)})),size:"M",loading:o,full:!0},(null==i?void 0:i.bx_common_tryAgain)||"Попробовать еще раз"))};function Z(e,n){return e%10==1&&e%100!=11?n[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?n[1]:n[2]}function J(e,n){return 1===e?n[0]:n[1]}function q(e,n){return function(o,t){const i=e[o],a=[];if(!t)return"";if(!i)return n({key:o,keys_total:Object.keys(e).length,msg:`Couldn't find key for i18n: "${o}"`}),"";const r=[...function(e,n){let o;return{[Symbol.iterator]:()=>({next:()=>(o=n.exec(e),{value:o,done:null===o})})}}(i,/\{.*?\}/g)];let l=0;return r.forEach((e=>{var n;const o=null!==(n=e.index)&&void 0!==n?n:0;a.push(i.slice(l,o));const r=`${i.slice(o+1,o-1+e[0].length)}`;!Array.isArray(t)&&t[r]&&a.push(t[r]),l=o+e[0].length})),a.push(i.slice(l,i.length)),a}}const Q=/{([^{}]+)}/gi;function ee(e,n,o){const t=n.startsWith("ru");return function(n,i){const a=e[n];return a?a.replace(Q,((e,n)=>{const[a,r,...l]=n.split(":"),s=i[a];if(null==s)return e;if(!r)return s;function c(e,n){return l.length<n?(o({key:a,msg:`Method '${r}' expects ${n} words, got ${l.length}`}),""):"number"!=typeof s?(o({key:a,msg:`Method '${r}' expects a number argument, got ${typeof s}`}),""):e(s,l)}return"pluralRu"===r||"plural"===r&&t?c(Z,3):r.startsWith("plural")?c(J,2):(o({key:a,msg:`Unknown method '${r}'`}),"")})):(o({key:n,msg:`Couldn't find key for i18n: "${n}"`}),"")}}const ne=()=>{},oe=e=>{window.reasons.sendReason({code:"FE-SESSION_VERIFY_LOGS",message:"FE-SESSION_VERIFY_LOGS",payload:e})},te="SESSION_VERIFY",ie="https://aliexpress.ru",ae=e=>{window.parent.postMessage(JSON.stringify({code:"SESSION_VERIFY_RESULT",payload:e}),window.location.origin)},re=({data:e,error:n,setError:a,i18nData:r,onSubmit:l})=>{const[s,c]=m(""),[d,f]=m(!1),{i18n:g}=r,{phoneCountries:_}=w(),{flow:v}=e,h="PHONE"===v,C=()=>T(void 0,void 0,void 0,(function*(){const e=s.trim(),{isValid:n,errorMessage:c}=((e,n,i,a)=>{const{i18n:r}=i,l={incorrectPhone:(null==r?void 0:r.login_login_incorrectPhone)||"Введите корректный номер телефона",incorrectEmail:(null==r?void 0:r.login_login_incorrectEmail)||"Неправильный формат почты",emptyPhone:(null==r?void 0:r.login_login_emptyPhone)||"Введите номер телефона",emptyEmail:(null==r?void 0:r.login_login_emailAuthErrorEmptyEmail)||"Пожалуйста, введите свой адрес электронной почты"};if(!e)return{isValid:!1,errorMessage:"PHONE"===n?l.emptyPhone:l.emptyEmail};if("EMAIL"===n&&!(o(e)&&e.length>=3))return{isValid:!1,errorMessage:l.incorrectEmail};if("PHONE"===n){const n=a.find((n=>e.startsWith(n.phoneCode)));if(!n)return{isValid:!1,errorMessage:l.incorrectPhone};if(t(e)!==t(null==n?void 0:n.phoneMask))return{isValid:!1,errorMessage:l.incorrectPhone}}return{isValid:!0}})(e,v,r,_);if(!n)return void a(c);const d=h?i(e):e;f(!0),yield l(d),f(!1)})),S={PHONE:{title:(null==g?void 0:g.login_login_forceVerify_enterPhone)||"Укажите ваш номер для верификации",inputPlaceholder:(null==g?void 0:g.login_login_phone)||"Телефон"},EMAIL:{title:(null==g?void 0:g.login_login_forceVerify_enterEmail)||"Укажите вашу почту для верификации",inputPlaceholder:(null==g?void 0:g.login_login_email)||"Почта"}},{title:b,inputPlaceholder:I}=S[v];return u.createElement("div",null,u.createElement(p.Heading,{className:W},b),u.createElement(E,{className:$,countryConfig:_,disabled:d,upPlaceholder:!0,error:!!n,note:n,placeholder:I,size:"L",value:s,variant:v.toLowerCase(),onChange:e=>{a(void 0),c(e)},onKeyPress:e=>T(void 0,void 0,void 0,(function*(){"Enter"===e.key&&(yield C())})),inputProps:{autoFocus:!0,id:v,type:"text",inputMode:h?"tel":"email",name:v},initialFocused:!0}),u.createElement(y,{onClick:C,size:"L",loading:d,full:!0},(null==g?void 0:g.bx_common_continue)||"Далее"))},le=()=>u.createElement("div",{className:U},u.createElement(h,null)),se=({data:e,i18nData:n,isLoading:o,error:t,setError:i,onSubmit:a,onFetchFlowData:r})=>o?u.createElement(le,null):e?u.createElement(re,{data:e,i18nData:n,error:t,setError:i,onSubmit:a}):u.createElement(K,{i18nData:n,onFetchFlowData:r}),ce=({data:e,error:n,setError:o,i18nData:t,onInit:i,onFetchFlowData:r,onSubmit:l,onClose:s,onForceWebviewRepaint:c,isAerWebview:d})=>{const[g,_]=m(!e);f((()=>{e||p()}),[e]),f((()=>{T(void 0,void 0,void 0,(function*(){yield a()}))}),[]),f((()=>{d&&c()}),[d]);const p=()=>T(void 0,void 0,void 0,(function*(){_(!0),yield i(),_(!1)}));return u.createElement(v,{className:A,onClose:s,open:!0,disableBackdropClick:!0},u.createElement(se,{data:e,isLoading:g,error:n,setError:o,i18nData:t,onSubmit:l,onFetchFlowData:r}))},de=({code:e,codeError:n,channel:o,codeLength:t,resendData:i,onChangeCodeError:a,onChangeCode:r,onChangeChannel:l,onResendCode:s,onSubmitCode:c,onBack:d,onClose:m,title:f,subtitle:g,isMobile:_,i18nData:p})=>{const{i18n:y}=p;return u.createElement(v,{className:A,onClose:m,open:!0,disableBackdropClick:!0},u.createElement(S,{code:e,codeError:n,channel:o,codeLength:t,resendData:i,onChangeCode:r,onChangeCodeError:a,onChangeChannel:l,onResendCode:s,onSubmitCode:c,onBack:d,title:f,subtitle:g,isMobile:_,i18nData:p,backButtonTitle:null==y?void 0:y.login_login_backPanelBack}))};var ue,me=(function(e){!function(){var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)){if(i.length){var r=o.apply(null,i);r&&e.push(r)}}else if("object"===a)if(i.toString===Object.prototype.toString)for(var l in i)n.call(i,l)&&i[l]&&e.push(l);else e.push(i.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):window.classNames=o}()}(ue={exports:{}},ue.exports),ue.exports),fe={icon:"ali-icons_SvgIcon__icon__75ocax",size_M:"ali-icons_SvgIcon__size_M__75ocax",size_L:"ali-icons_SvgIcon__size_L__75ocax",size_XL:"ali-icons_SvgIcon__size_XL__75ocax",size_2XL:"ali-icons_SvgIcon__size_2XL__75ocax",size_3XL:"ali-icons_SvgIcon__size_3XL__75ocax",size_4XL:"ali-icons_SvgIcon__size_4XL__75ocax",size_5XL:"ali-icons_SvgIcon__size_5XL__75ocax"};const ge=e=>{var{children:n,size:o="M",className:t}=e,i=function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)n.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(o[t[i]]=e[t[i]])}return o}(e,["children","size","className"]);return u.createElement("svg",Object.assign({fill:"currentColor",className:me(fe.icon,fe[`size_${o}`],t)},i),n)},_e=e=>u.createElement(ge,Object.assign({},e,{viewBox:"0 0 32 32"}),u.createElement("path",{fillRule:"evenodd",d:"M14.212 3.578c.737-1.474 2.84-1.474 3.578 0l11.764 23.528A2 2 0 0127.764 30H4.238a2 2 0 01-1.789-2.894L14.212 3.578zM16 10a1 1 0 011 1v11a1 1 0 11-2 0V11a1 1 0 011-1zm0 15a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"}));_e.displayName="IconWarning";var ve="session-verify_ConfirmLogoutModal__confirmDialog__1eypdz",pe="session-verify_ConfirmLogoutModal__confirmDialogTitle__1eypdz",ye="session-verify_ConfirmLogoutModal__warningIcon__1eypdz",he="session-verify_ConfirmLogoutModal__confirmDialogButtons__1eypdz",Ce="session-verify_ConfirmLogoutModal__confirmDialogButton__1eypdz";const Ee=({isOpen:e,onConfirm:n,onCancel:o,i18nData:t})=>{const{i18n:i}=t;return u.createElement(v,{className:ve,open:e,onClose:o},u.createElement("div",{className:j},u.createElement(C,{className:pe,size:"XL"},u.createElement(_e,{size:"L",className:ye})," ",i.bx_common_attention||"Внимание!"),u.createElement(p.Paragraph,{size:"M"},i.bx_common_logoutConfirm||"Вы уверены, что хотите выйти?")),u.createElement("div",{className:he},u.createElement(y,{variant:"Secondary",size:"M",className:Ce,onClick:n},i.bx_common_logout||"Выйти из аккаунта"),u.createElement(y,{variant:"Secondary",size:"M",className:Ce,onClick:o},i.bx_common_cancel||"Отменить")))};var we,Se=function(e,n){return e(n={exports:{}},n.exports),n.exports}((function(e){!function(){var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)){if(i.length){var r=o.apply(null,i);r&&e.push(r)}}else if("object"===a)if(i.toString===Object.prototype.toString)for(var l in i)n.call(i,l)&&i[l]&&e.push(l);else e.push(i.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):window.classNames=o}()}));!function(e){e.PENDING="PENDING",e.INIT="INIT",e.VERIFY="VERIFY",e.LOGOUT="LOGOUT"}(we||(we={}));var be="session-verify_LogoutModal__modal__ibvy9w",Ie="session-verify_LogoutModal__content__ibvy9w",Le="session-verify_LogoutModal__logoutPageModal__ibvy9w";const Oe=({domain:e="aliexpress.ru",isLogoutPage:n,onInit:o,onChangeStage:t,i18nData:i})=>{const[a,r]=m(!0),[l,s]=m(!0),{i18n:c}=i;f((()=>{T(void 0,void 0,void 0,(function*(){yield o(),s(!1)}))}),[]);return u.createElement(b,{className:Se(be,n&&Le),open:a,handleClose:()=>{r(!1),window.location.reload(),t(we.PENDING)},disableBackdropClick:!0,hideCloseButton:n,fixedSize:!1},l?u.createElement("div",{className:U},u.createElement(h,null)):u.createElement(u.Fragment,null,u.createElement(H,{className:G}),u.createElement("div",{className:Ie},u.createElement(R.Heading,{size:"S"},(null==c?void 0:c.bx_login_userLoggedOut)||"Вы вышли из аккаунта"),u.createElement(R.Body,{size:"S"},(null==c?void 0:c.bx_login_signInToContinueShopping)||"Для продолжения покупок войдите в свой аккаунт")),u.createElement(k,{variant:"Secondary",size:"L",onClick:()=>{s(!0);const o=n?new URLSearchParams(window.location.search).get("returnUrl")||ie:window.location.href,t=`https://login.${I(e)}?returnUrl=${encodeURIComponent(o)}`;window.open(t,"_self")},full:!0},(null==c?void 0:c.bx_common_signIn)||"Войти")))},Ne=({mixerI18nData:e,domain:n,isPage:o,onSuccess:t,onFailed:i})=>{const[a,c]=m(),[d,u]=m(),[f,g]=m(we.PENDING),[_,v]=m(null),[p,y]=m("call"),[h,C]=m(),[E,S]=m(6),b=new Array(E).fill(""),[I,V]=m(!0),[R,k]=m(),[A,U]=m(b),[B,j]=m(),{phoneCountries:G}=w(),H=[...G,...r],$=o?e:(e=>{const{lang:n="ru_RU",i18n:o={}}=e||{};return{lang:n,i18n:o,i18nTemplate:ee(o,n,ne),i18nHtmlTemplate:q(o,ne)}})(d),W=()=>T(void 0,void 0,void 0,(function*(){const{data:e}=yield L(n);return"OK"===(null==e?void 0:e.code)&&u(null==e?void 0:e.result),null==e?void 0:e.result})),X=()=>T(void 0,void 0,void 0,(function*(){const{data:e,error:o}=yield O(n);return(o||"OK"!==(null==e?void 0:e.code))&&(k((null==o?void 0:o.message)||(null==e?void 0:e.message)),V(!1)),"OK"===(null==e?void 0:e.code)&&c(null==e?void 0:e.result),null==e?void 0:e.result})),{title:Y,subtitle:K}=l($,{phone:null==a?void 0:a.phone,email:null==a?void 0:a.email,channel:p,showPhone:!0,codeLength:E});return{flowData:a,setFlowData:c,config:d,stage:f,onChangeStage:e=>{g(e)},error:R,setError:k,isLoading:I,i18nData:$,countryConfig:H,codeInputCommonProps:{code:A,codeError:B,resendData:h,title:Y,subtitle:K,codeLength:E,channel:p,onChangeCode:e=>{j(void 0),U(e)},onChangeCodeError:j,onChangeChannel:"email"!==p?e=>{y(e)}:void 0,onBack:()=>{U(b),j(void 0),g(we.INIT)},onResendCode:e=>T(void 0,void 0,void 0,(function*(){if(V(!0),j(void 0),!_||!a)return void j(s);const{phone:o,email:t,flow:r,returnUrl:l}=a,{data:c,error:d}=yield F(n,{sessionId:_,channel:(e||p).toUpperCase(),phone:o,email:t});if(V(!1),(d||"OK"!==(null==c?void 0:c.code))&&((null==d?void 0:d.code)===z.TOO_MANY_RESENDS&&i(r,l),j((null==d?void 0:d.message)||(null==c?void 0:c.message))),c&&(null==c?void 0:c.result)){const{sessionId:e,channel:n,resendCodeData:o,codeLength:t}=c.result;v(e),y(n.toLowerCase()),C(o),S(t)}})),onSubmitCode:e=>T(void 0,void 0,void 0,(function*(){if(!_||!a)return void j(s);const{phone:o="",email:i="",flow:r,returnUrl:l=ie}=a,c="PHONE"===r&&!!o;V(!0);const{data:d,error:u}=c?yield x(n,{sessionId:_,code:e,phone:o}):yield M(n,{sessionId:_,code:e,email:i});V(!1),(null==d?void 0:d.code)===D.OK?(t(r,l),U(b),g(we.PENDING)):j((null==u?void 0:u.message)||(null==d?void 0:d.message))}))},onInit:()=>T(void 0,void 0,void 0,(function*(){V(!0);const[e,n]=yield Promise.all([X(),W()]);return V(!1),{flowData:e,config:n}})),onSendCode:e=>T(void 0,void 0,void 0,(function*(){if(!a)return;const{flow:o}=a,t="PHONE"===o,i=t?{phone:e}:{email:e};c(Object.assign(Object.assign({},a),i)),V(!0);const{data:r,error:l}=t?yield N(n,{phone:e,channel:p.toUpperCase()}):yield P(n,{email:e});if(V(!1),(l||"OK"!==(null==r?void 0:r.code))&&k((null==l?void 0:l.message)||(null==r?void 0:r.message)),"OK"===(null==r?void 0:r.code)&&(null==r?void 0:r.result)){const{sessionId:e,channel:n,resendCodeData:o,codeLength:t}=r.result;v(e),C(o),S(t),n&&y(n.toLowerCase()),g(we.VERIFY)}})),onFetchConfig:W,onFetchFlowData:X}},Pe=({webviewMethods:e,isPage:n,isAerWebview:o,isMobile:t})=>{const i=o?"AerWebview":t?"msite":"PC";return{onSuccess:(t,a)=>{if(oe({flow:t,platform:i,status:"success"}),ae({flow:t,platform:i,status:"success"}),o)null==e||e.onSuccess();else if(n){const e=((e,n)=>{const o=new URL(e);return o.searchParams.append("session_verify_status",n),o.toString()})(decodeURIComponent(a),"success");window.location.replace(e)}},onFailed:(n,t)=>{oe({flow:n,platform:i,status:"not_verified"}),ae({flow:n,platform:i,status:"not_verified"}),o?null==e||e.onFailed():V(t)},onLogout:(n,t)=>{oe({flow:n,platform:i,status:"logout"}),ae({flow:n,platform:i,status:"logout"}),o?null==e||e.onLogout():V(t)}}};let xe=null,Me=!1;const De=e=>{var n,o;if(e.data)try{const n=JSON.parse(e.data);(null==n?void 0:n.code)===te&&(xe=e)}catch(e){null===(n=null===window||void 0===window?void 0:window.reasons)||void 0===n||n.sendReason({code:"ERROR_SESSION_VERIFY_EVENT_PARSING",message:`Some error occured while parsing event.data, ${(null===(o=e)||void 0===o?void 0:o.message)||""}`,payload:{}})}};const Fe=e("default",(({isPage:e,isLogoutPage:o,isAerWebview:t,webviewMethods:i,domain:a="aliexpress.ru"})=>{const[r,l,s]=((e=!1)=>{const[n,o]=m(e);return[n,g((()=>{o(!0)}),[]),g((()=>{o(!1)}),[])]})(),_=n(),v=d("(max-width: 768px)"),{onSuccess:p,onFailed:y,onLogout:h}=Pe({webviewMethods:i,isPage:e||o,isAerWebview:t,isMobile:v}),{flowData:C,config:E,error:w,setError:S,i18nData:b,stage:I,codeInputCommonProps:L,onChangeStage:O,onInit:N,onSendCode:P,onFetchConfig:x,onFetchFlowData:M}=Ne({domain:a,isPage:e,mixerI18nData:_,onSuccess:p,onFailed:y}),D=e=>T(void 0,void 0,void 0,(function*(){var n;if(e.data)try{const o=JSON.parse(e.data);if((null==o?void 0:o.code)===te){if("LOGOUT"===(null===(n=null==o?void 0:o.payload)||void 0===n?void 0:n.flow))return void O(we.LOGOUT);O(we.INIT)}}catch(e){}}));f((()=>(xe&&(D(xe),xe=null),Me&&(Me=!1,window.removeEventListener("message",De)),window.addEventListener("message",D),()=>{window.removeEventListener("message",D)})),[]),f((()=>{e&&O(we.INIT),o&&O(we.LOGOUT)}),[e,o]);return u.createElement(u.Fragment,null,I===we.INIT&&u.createElement(ce,{data:C,error:w,setError:S,i18nData:b,onInit:N,onFetchFlowData:M,onSubmit:P,onClose:l,onForceWebviewRepaint:()=>{document.body.style.display="none",setTimeout((()=>{document.body.style.display=""}))},isAerWebview:t}),I===we.VERIFY&&u.createElement(de,Object.assign({},L,{onClose:l,isMobile:v,i18nData:b})),I===we.LOGOUT&&u.createElement(Oe,{isLogoutPage:o,domain:null==E?void 0:E.domain,onInit:x,onChangeStage:O,i18nData:b}),I!==we.PENDING&&I!==we.LOGOUT&&u.createElement(Ee,{isOpen:r,onConfirm:()=>{const{flow:e,returnUrl:n}=C||{},o=c();h(e,n||o)},onCancel:s,i18nData:b}))}));if("undefined"!=typeof window){const e=()=>{const e=window.document.getElementById("__session-container__");e&&_.render(u.createElement(Fe,null),e)};if(document.querySelector("[data-real-css]")){(function(){const e=document.querySelector("[data-real-css]");return"all"===(null==e?void 0:e.getAttribute("media"))})()?e():(Me=!0,window.addEventListener("message",De),window.addEventListener("criticalExternalStyles:loaded",e))}else e()}}}}));//# sourceMappingURL=session-verify-modal.0.6.1.js.map